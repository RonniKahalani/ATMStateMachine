@startuml
[*] --> IDLE

IDLE --> CARD_INSERTED : INSERT_CARD [cardValid]
IDLE --> OUT_OF_SERVICE : SHUTDOWN

CARD_INSERTED --> PIN_VERIFIED : ENTER_PIN [pinCorrect]
CARD_INSERTED --> IDLE : EJECT_CARD

PIN_VERIFIED --> TRANSACTION_IN_PROGRESS : SELECT_WITHDRAWAL
PIN_VERIFIED --> IDLE : EJECT_CARD

TRANSACTION_IN_PROGRESS --> PIN_VERIFIED : WITHDRAW_AMOUNT [success]
TRANSACTION_IN_PROGRESS --> OUT_OF_SERVICE : WITHDRAW_AMOUNT [atmCash <= 0]
TRANSACTION_IN_PROGRESS --> IDLE : EJECT_CARD

OUT_OF_SERVICE --> [*]
@enduml